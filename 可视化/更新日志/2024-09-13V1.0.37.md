# 2024-09-13 V1.0.37

本次升级内容如下：

### 新增
1. 单击事件添加操作变量功能

<font style="color:rgb(36, 41, 47);">绑定可读写设备变量，可选择固定值操控模式或可设值操控模式。操作变量的最终效果与蓝图的发送数据完全相同，如下图所示：</font>

![1726110146828-70a84feb-b9f7-4121-9481-305e7e26db89.png](./img/vorD8bEawAK36LtC/1726110146828-70a84feb-b9f7-4121-9481-305e7e26db89-856187.png)

| 操作变量弹窗设置 | 预览页面效果 |
| --- | --- |
| ![1726111463211-07dc6085-b3f4-4422-9baf-65cb98d2aebe.png](./img/vorD8bEawAK36LtC/1726111463211-07dc6085-b3f4-4422-9baf-65cb98d2aebe-315355.png) | ![1726111497633-30c2aa01-73b4-4b72-9ec5-db9b4e868783.gif](./img/vorD8bEawAK36LtC/1726111497633-30c2aa01-73b4-4b72-9ec5-db9b4e868783-369990.gif) |
| ![1726111515903-801a3149-c310-4a55-a644-4e4dffefd685.png](./img/vorD8bEawAK36LtC/1726111515903-801a3149-c310-4a55-a644-4e4dffefd685-927587.png) | ![1726111562700-d3d92d27-a9ba-4f7b-b2a6-ad6d5c6a3535.gif](./img/vorD8bEawAK36LtC/1726111562700-d3d92d27-a9ba-4f7b-b2a6-ad6d5c6a3535-602960.gif) |




2. 单击事件添加脚本窗口

![1725433950965-c9ea608a-a798-48e6-bc8a-395e8c57873b.png](./img/vorD8bEawAK36LtC/1725433950965-c9ea608a-a798-48e6-bc8a-395e8c57873b-136282.png)

<font style="color:rgb(36, 41, 47);">如果配置无法满足需求，可以通过脚本窗口进行代码编辑。</font>



3. 【控件】历史报表添加滚动功能

![1725434171196-3b6056e7-3fe8-4411-b357-1576967e4746.png](./img/vorD8bEawAK36LtC/1725434171196-3b6056e7-3fe8-4411-b357-1576967e4746-839377.png)

4. 【控件】实时历史报表添加历史数据选项

![1725434230197-d35892b8-d104-43e1-a43d-bffb8d39f645.png](./img/vorD8bEawAK36LtC/1725434230197-d35892b8-d104-43e1-a43d-bffb8d39f645-254852.png)

<font style="color:rgb(36, 41, 47);"></font>

5. 【控件】图形添加颜色填充动画

![1725434533536-8b1780ef-09da-42b1-a335-846357da7670.png](./img/vorD8bEawAK36LtC/1725434533536-8b1780ef-09da-42b1-a335-846357da7670-683413.png)



6. 【控件】文本添加背景、边框样式；添加边框、填充动画

![1725434649883-69836c01-f38d-4f92-9207-df8a8ecbb52e.png](./img/vorD8bEawAK36LtC/1725434649883-69836c01-f38d-4f92-9207-df8a8ecbb52e-339685.png)

![1725434605411-cdb52fb0-12c8-4506-9c53-a63a823e9273.png](./img/vorD8bEawAK36LtC/1725434605411-cdb52fb0-12c8-4506-9c53-a63a823e9273-250552.png)



7. 【控件】添加图文控件

![1725434766547-cddbfa90-3e50-44ae-943a-007c166eef6f.png](./img/vorD8bEawAK36LtC/1725434766547-cddbfa90-3e50-44ae-943a-007c166eef6f-839865.png)

![1725434790106-fa59a819-f613-4dd0-87c6-e0e43b99b0c6.png](./img/vorD8bEawAK36LtC/1725434790106-fa59a819-f613-4dd0-87c6-e0e43b99b0c6-890315.png)



8. 添加版本号

![1726190631179-92c3b71e-2984-4191-9f47-ac9c1fd123bb.png](./img/vorD8bEawAK36LtC/1726190631179-92c3b71e-2984-4191-9f47-ac9c1fd123bb-985296.png)

点击版本号可跳转更新日志页面

![1726190686181-435da018-214a-47b1-bd88-45226cb832de.png](./img/vorD8bEawAK36LtC/1726190686181-435da018-214a-47b1-bd88-45226cb832de-116631.png)

### 优化
1. 【蓝图】发送数据功能优化

![1725607928022-8c8cc5fc-6082-4249-b748-e15caece6470.png](./img/vorD8bEawAK36LtC/1725607928022-8c8cc5fc-6082-4249-b748-e15caece6470-061025.png)

发送数据窗口添加类型、确认弹窗、结果通知三个属性

**类型：**设置数据（默认）、手动填写。

+ 设置数据：当类型为设置数据时，使用方法和之前一致。

| **静态数据：在输入框输入值即可** | **其他数据：鼠标拖拽，出现弹窗，点击选择** |
| --- | --- |
| ![1725608304909-1403e051-84ef-48f4-b9df-ff6053d07da9.png](./img/vorD8bEawAK36LtC/1725608304909-1403e051-84ef-48f4-b9df-ff6053d07da9-170700.png) | ![1725608524879-6f6ed75d-7031-4ac3-beef-824bc1e00d8d.png](./img/vorD8bEawAK36LtC/1725608524879-6f6ed75d-7031-4ac3-beef-824bc1e00d8d-633720.png) |


+ 手动填写：<font style="color:rgb(36, 41, 47);">默认会弹出窗口，用户可以在窗口中输入自定义数值。</font>

![1725609557535-9532f2c4-5934-4c04-b57d-dd0620f16e76.png](./img/vorD8bEawAK36LtC/1725609557535-9532f2c4-5934-4c04-b57d-dd0620f16e76-299950.png)

**确认弹窗：**<font style="color:rgb(36, 41, 47);">开启后，可写入提示信息，在发送数据前会弹出确认窗口，点击窗口上的“确定”按钮后才会真正发送数据。</font>

**结果通知：**数据发送后进行弹窗提示

|  | 蓝图配置 | 预览弹窗效果 |
| --- | --- | --- |
| 设置<br/>数据 | ![1725608761155-b8f25066-851d-403b-acd7-50e732870f35.png](./img/vorD8bEawAK36LtC/1725608761155-b8f25066-851d-403b-acd7-50e732870f35-798669.png) | ![1725609076650-83a51a8a-b3da-4725-b28e-5b81c5910656.gif](./img/vorD8bEawAK36LtC/1725609076650-83a51a8a-b3da-4725-b28e-5b81c5910656-366229.gif) |
| 手动<br/>填写 | ![1725609103310-415b3c7a-a76d-4b7c-8e44-f72480d983d2.png](./img/vorD8bEawAK36LtC/1725609103310-415b3c7a-a76d-4b7c-8e44-f72480d983d2-642719.png) | ![1725609232317-c8012e6e-e994-4295-bf0f-b563645991ba.gif](./img/vorD8bEawAK36LtC/1725609232317-c8012e6e-e994-4295-bf0f-b563645991ba-740521.gif) |


2. 【控件】水球图数值显示优化

![1725435068054-8121843a-8e9f-426d-b1b9-3b4f27a5a79f.png](./img/vorD8bEawAK36LtC/1725435068054-8121843a-8e9f-426d-b1b9-3b4f27a5a79f-922087.png)

如<font style="color:rgb(36, 41, 47);">上图中，两个水球图绑定了相同的变量：</font>

+ **<font style="color:rgb(36, 41, 47);">显示百分比</font>**<font style="color:rgb(36, 41, 47);">：显示该变量的占比。</font>
+ **<font style="color:rgb(36, 41, 47);">不显示百分比</font>**<font style="color:rgb(36, 41, 47);">：显示该变量的实际值。</font>

<font style="color:rgb(36, 41, 47);">无论是显示百分比还是实际值，背后的水波高度都是按照百分比计算的。</font>



3. 视频控件优化

<font style="color:rgb(36, 41, 47);">原先需要选择视频流类型（FLV或HLS），现在只需填写视频流地址即可，简化了用户操作。</font>

![1725435932693-8ff99188-c322-4515-9365-93119d74d112.png](./img/vorD8bEawAK36LtC/1725435932693-8ff99188-c322-4515-9365-93119d74d112-936351.png)



4. 批量设置优化

<font style="color:rgb(36, 41, 47);">在多选控件中，具有相同【外观】或【属性】的选项都可以批量设置。</font>

![1725436246962-34712cc6-a987-4407-9b64-9301e1a0cd20.png](./img/vorD8bEawAK36LtC/1725436246962-34712cc6-a987-4407-9b64-9301e1a0cd20-952376.png)



5. 单个动画开启循环时，保留结束状态属性。

![1725436516486-13ea3eb8-2564-4f01-bc04-7292190f0b06.png](./img/vorD8bEawAK36LtC/1725436516486-13ea3eb8-2564-4f01-bc04-7292190f0b06-561549.png)

丰富动画结束的状态效果，例如进度填充动画，在循环动画停止时用户可能想保留动画最最终状态效果，而旋转动画，用户可能更喜欢循环动画停止时恢复到初始状态。



6. <font style="color:rgb(36, 41, 47);">PC端预览场景时，页面文字显示优化</font>

<font style="color:rgb(36, 41, 47);">之前在PC端预览页面上，文字存在模糊的问题。此次已对其进行了优化。</font>

<font style="color:rgb(36, 41, 47);"></font>

7. 控件样式优化
+ <font style="color:rgb(36, 41, 47);">警报表和历史报表样式优化；告警报表字段筛选和状态别名弹窗改进</font>
+ 文本背景色优化



8. 操作日志功能优化

<font style="color:rgb(36, 41, 47);">原有的操作日志系统记录最近的20条操作记录，但这也引发了一些问题。现在，我们将操作日志调整为仅记录当前操作的数据。用户保存的数据仍会保留，但如果用户点击顶部的刷新工具或使用浏览器的刷新功能，则所有操作记录将被清空。这一改动有助于减轻数据存储负担，减少不必要的问题。</font>

### 修复
1. <font style="color:rgb(36, 41, 47);">解决【历史报表】和【历史数据】全选功能问题。</font>
2. <font style="color:rgb(36, 41, 47);">修复【列表】节点名称过长导致可选、可见操作图标被遮盖的问题。</font>
3. <font style="color:rgb(36, 41, 47);">优化目录过长时的滚动问题。</font>
4. <font style="color:rgb(36, 41, 47);">修复曲线XY轴无数据显示的问题。</font>
5. <font style="color:rgb(36, 41, 47);">解决三维模型导入失败的问题。</font>
6. <font style="color:rgb(36, 41, 47);">优化同类型节点的数据存储。</font>
7. <font style="color:rgb(36, 41, 47);">修复【历史报表】滚动和分页切换未触发保存的问题。</font>
8. <font style="color:rgb(36, 41, 47);">修复复制和删除操作图标后的目录定位问题。</font>
9. <font style="color:rgb(36, 41, 47);">修复变量类型为历史报表时使用全选功能的问题。</font>
10. <font style="color:rgb(36, 41, 47);">修复【模板管理】中添加模板时报错的问题。</font>
11. <font style="color:rgb(36, 41, 47);">解决用户自定义设计尺寸的问题。</font>
12. <font style="color:rgb(36, 41, 47);">修复网格单元格合并后无法调整边框的问题。</font>
13. <font style="color:rgb(36, 41, 47);">修复告警报表字段筛选中无法取消选中项的问题。</font>



> 更新: 2024-09-13 09:42:22  
> 原文: <https://www.yuque.com/iot-fast/ksh/lvwlxmbvf88918vx>