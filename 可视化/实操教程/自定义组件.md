# 自定义组件

## 1 整体介绍

![1713173580088-ffec2edd-b0d5-4151-a903-e4b34fe43592.png](./img/UvqsNmS-vnZvKFV2/1713173580088-ffec2edd-b0d5-4151-a903-e4b34fe43592-803664.png)

### 设计

用户新增目录列表以及自定义组件列表

### 当前标签页

当前打开的组件标签

### 组件画布区域

<font style="color:rgb(38, 38, 38);">绘</font>画区，主要工作区。可以将系统组件、用户设计以及资源拖拽到画布进行编辑。

### 组件面板

<font style="color:rgb(38, 38, 38);">属性面板分2种不同类型属性面板。</font>

<font style="color:rgb(38, 38, 38);">点击画布空白区，进入画布属性面板；</font>

![1713174390173-a5abcf65-eecf-4903-bf0c-0d7f342aa4b9.png](./img/UvqsNmS-vnZvKFV2/1713174390173-a5abcf65-eecf-4903-bf0c-0d7f342aa4b9-177963.png)

<font style="color:rgb(38, 38, 38);">点击单个节点，进入单个节点属性面板</font>

![1713174444045-86cac961-5af4-47b5-821c-25f0345df802.png](./img/UvqsNmS-vnZvKFV2/1713174444045-86cac961-5af4-47b5-821c-25f0345df802-170036.png)

### 组件数据绑定列表

用于添加参数绑定节点属性。

![1713237265295-7f079888-5b2d-422d-b9d0-ca840d681b90.png](./img/UvqsNmS-vnZvKFV2/1713237265295-7f079888-5b2d-422d-b9d0-ca840d681b90-393245.png)

1. \*\*Attr：\*\*即数据绑定参数标签，用于绑定节点属性或通过绑定方法进行判定，目前支持中英文加数字格式，例如：name、title1、姓名、姓名1；建议使用英文加数字格式。
2. \*\*值类型：\*\*即当期绑定参数的类型，目前支持：字符串、布尔、复选、数字、颜色、对象、数组、颜色数组、图片、字体样式、字体名、水平对齐、垂直对齐等
3. \*\*默认值：\*\*即拖拽到场景中使用的初始值，会根据值类型约束。
4. \*\*名称：\*\*场景中使用时显示的名称，如下：

![1713237862743-9a72335a-387d-408c-9eef-3fbf8e6a273b.png](./img/UvqsNmS-vnZvKFV2/1713237862743-9a72335a-387d-408c-9eef-3fbf8e6a273b-390944.png)

![1713237888250-2825afef-a18c-4de8-843e-ab8d2eac924e.png](./img/UvqsNmS-vnZvKFV2/1713237888250-2825afef-a18c-4de8-843e-ab8d2eac924e-077524.png)

5. \*\*组：\*\*即绑定参数的分类标签，勾选可绑定的数据绑定参数都是显示在数据列，无组的的概念，只有未勾选的数据绑定参数设置组才有效果。如下：

![1713238384929-bc017807-9a57-41f6-a166-24288c45776f.png](./img/UvqsNmS-vnZvKFV2/1713238384929-bc017807-9a57-41f6-a166-24288c45776f-650674.png)

![1713238187148-f579dabf-f87b-4015-a1fa-4dfe092d931c.png](./img/UvqsNmS-vnZvKFV2/1713238187148-f579dabf-f87b-4015-a1fa-4dfe092d931c-153468.png)

![1713238344950-7efae8cf-e4ac-462e-896b-9ec938bc3512.png](./img/UvqsNmS-vnZvKFV2/1713238344950-7efae8cf-e4ac-462e-896b-9ec938bc3512-188902.png)

6. 可绑定：即勾选后，在场景页面显示在数据列且可进行数据绑定（模拟数据、设备数据、API服务、数据表等数据源绑定）
7. 附加信息：即用于限定数据绑定参数值的下拉选项内容，其规范为：

![1713238759422-bf891754-71b3-4918-bd2b-b33001739ad1.png](./img/UvqsNmS-vnZvKFV2/1713238759422-bf891754-71b3-4918-bd2b-b33001739ad1-195368.png)

| **配置** | **效果** |
| --- | --- |
| ![1713238996758-86a8a211-b875-40ee-8cd3-34224ca00321.png](./img/UvqsNmS-vnZvKFV2/1713238996758-86a8a211-b875-40ee-8cd3-34224ca00321-515015.png) | ![1713238920558-14984dfd-0383-4d95-9780-bc62eb39bf75.png](./img/UvqsNmS-vnZvKFV2/1713238920558-14984dfd-0383-4d95-9780-bc62eb39bf75-198524.png) |
| ![1713239021126-c9946109-e5af-486e-994d-5b532ea8f21b.png](./img/UvqsNmS-vnZvKFV2/1713239021126-c9946109-e5af-486e-994d-5b532ea8f21b-206957.png) | ![1713238884275-6b301914-c905-4bc4-b59c-2aed70a9a464.png](./img/UvqsNmS-vnZvKFV2/1713238884275-6b301914-c905-4bc4-b59c-2aed70a9a464-409571.png) |

7. 描述，即用户添加备注用于说明改数据绑定参数。

说明：数据参数绑定属性有两种方式：

方式一：直接绑定参数

![1713174653124-7dc51bd7-d43c-438e-a4f4-b1c471e0281d.png](./img/UvqsNmS-vnZvKFV2/1713174653124-7dc51bd7-d43c-438e-a4f4-b1c471e0281d-602027.png)

![1713174682090-71350d70-ebd5-42a3-8f77-673ef8a0170c.png](./img/UvqsNmS-vnZvKFV2/1713174682090-71350d70-ebd5-42a3-8f77-673ef8a0170c-908333.png)

方式二：函数绑定，通过方法判断

![1713174587613-8ec9bcd2-622a-4a55-a17e-f80bcfa7c522.png](./img/UvqsNmS-vnZvKFV2/1713174587613-8ec9bcd2-622a-4a55-a17e-f80bcfa7c522-417181.png)

![1713174618691-dae13989-7cf1-43e0-acba-ce01de58af15.png](./img/UvqsNmS-vnZvKFV2/1713174618691-dae13989-7cf1-43e0-acba-ce01de58af15-339202.png)

### 组件节点展示列表

构成当前组件的所有节点展示区域，可单选或多选节点进行操作。

### 鹰眼(缩略图)

## 2 操作步骤

[音视频附件: 灯的效果.mp4](./attachments/UvqsNmS-vnZvKFV2\灯的效果.mp4)

<font style="color:rgb(38, 38, 38);">如上，通过点击组件灯的数据属性"状态"可切换开、关效果，同时用户可通过设置开、关颜色来呈现不同的开关颜色效果。接下来，以此为例进行组件封装步骤说明。</font>

### <font style="color:rgb(38, 38, 38);">2.1 新建组件"灯"</font>

在我的/设计，鼠标悬浮目录新建组件"灯"。

![1713233254135-94178e7d-d83b-4372-a651-cbaace1943e0.png](./img/UvqsNmS-vnZvKFV2/1713233254135-94178e7d-d83b-4372-a651-cbaace1943e0-542309.png)

### 2.2 进行组件设计

拖拽基本图形到画布，设置形状为圆形，设置宽高各100。

![1713233563275-5080fe58-03a4-4cd8-8acb-aa280ee18734.png](./img/UvqsNmS-vnZvKFV2/1713233563275-5080fe58-03a4-4cd8-8acb-aa280ee18734-517784.png)

设置背景和线条样式

![1713233602083-babae071-8e8c-461a-a446-72d6ff54c6b6.png](./img/UvqsNmS-vnZvKFV2/1713233602083-babae071-8e8c-461a-a446-72d6ff54c6b6-960149.png)

拖拽基础图形到画布，更改名称为关，设置形状为圆形，设置宽高各73。

![1713233872992-55b92363-e588-4708-82b0-2494a9ce7dad.png](./img/UvqsNmS-vnZvKFV2/1713233872992-55b92363-e588-4708-82b0-2494a9ce7dad-167547.png)

设置背景和线条样式，并且上下位置居中对齐矩形。

![1713233914152-1e568185-1df9-4670-bf9f-a69814eeb407.png](./img/UvqsNmS-vnZvKFV2/1713233914152-1e568185-1df9-4670-bf9f-a69814eeb407-022690.png)

复制节点"关"，更改名称及其背景色，设置宽高各73。

![1713234081703-5bf8ec88-78aa-4e32-a6b4-672d3df0b855.png](./img/UvqsNmS-vnZvKFV2/1713234081703-5bf8ec88-78aa-4e32-a6b4-672d3df0b855-218236.png)

再复制一个圆，更改名称、背景色；取消边框，设置宽高63.

![1713234249491-67652ef9-955a-4fe4-b796-e80fb1b36d92.png](./img/UvqsNmS-vnZvKFV2/1713234249491-67652ef9-955a-4fe4-b796-e80fb1b36d92-688155.png)

以上操作后，组件灯的雏形就出来了。

### 2.3 进行数据绑定

添加数据绑定字段status，类型布尔，用于灯开启关闭条件判断。

添加数据绑定字段close，类型颜色，用于绑定关闭颜色属性。

添加数据绑定字段open，类型颜色，用于绑定开启颜色属性。

数据绑定字段全部勾选"可绑定",勾选后，，在场景中使用组件，字段会显示在数据列。

![1713234703458-8dcbe27a-5da8-4031-924b-54b2a6b430da.png](./img/UvqsNmS-vnZvKFV2/1713234703458-8dcbe27a-5da8-4031-924b-54b2a6b430da-332549.png)

![1713234802664-40b76328-15f1-4911-a539-9bc912765a2f.png](./img/UvqsNmS-vnZvKFV2/1713234802664-40b76328-15f1-4911-a539-9bc912765a2f-586111.png)

将数据绑定字段绑定到属性上，进行一一对应，对可见属性进行方法判定：

![1713234956589-5d4f20ca-e69c-4e8a-b95a-b17ffb3a290f.png](./img/UvqsNmS-vnZvKFV2/1713234956589-5d4f20ca-e69c-4e8a-b95a-b17ffb3a290f-879810.png)

![1713235468994-915fe5b9-e3c6-473f-ac0a-1644a800e24b.png](./img/UvqsNmS-vnZvKFV2/1713235468994-915fe5b9-e3c6-473f-ac0a-1644a800e24b-167130.png)

![1713235240383-3c7df5b5-6839-45f3-b574-ab6f683035b4.png](./img/UvqsNmS-vnZvKFV2/1713235240383-3c7df5b5-6839-45f3-b574-ab6f683035b4-716420.png)

![1713235432040-d9f9072a-6482-415b-8e38-3e5d2523d04f.png](./img/UvqsNmS-vnZvKFV2/1713235432040-d9f9072a-6482-415b-8e38-3e5d2523d04f-350821.png)

以上配置后，组件灯完成配置，保存后可直接拖拽到场景中使用。

以下是操作视频：

[音视频附件: 组件设计.mp4](./attachments/UvqsNmS-vnZvKFV2\组件设计.mp4)


> 更新: 2025-04-23 11:16:21  
> 原文: <https://www.yuque.com/iot-fast/ksh/qe1tiywa2154172a>