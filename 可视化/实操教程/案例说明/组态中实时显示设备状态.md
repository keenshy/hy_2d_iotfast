# 组态中实时显示设备状态

# 1.设计控件
## 1.1.新建设计![1733294272579-42074912-bde7-4c76-a3cc-c699bf5ff98f.png](./img/LLlCZtaV52hr66XH/1733294272579-42074912-bde7-4c76-a3cc-c699bf5ff98f-523269.png)
## 1.2.拖拽两个矩形控件到设计；
![1733294453201-749c5a37-bc6a-40ac-81a5-e94040912d50.png](./img/LLlCZtaV52hr66XH/1733294453201-749c5a37-bc6a-40ac-81a5-e94040912d50-387843.png)

## 1.3.选中控件，设置文字、阴影、背景等外观样式；
![设置外观](./img/LLlCZtaV52hr66XH/1733294537639-9e7f9390-65e3-4e7b-87a5-1c5e0c1ca183-394842.png)

## 1.4.选中设计空白处，添加数据绑定；
![数据绑定](./img/LLlCZtaV52hr66XH/1733282671921-5fb05a28-a089-44dc-a1d9-e15010a064b6-838443.png)

## 1.4.可见控制绑定；
![可见控制绑定](./img/LLlCZtaV52hr66XH/1733294006556-ad1ef0a2-9021-48ce-bf99-56ede62f482e-630984.png)

**离线绑定脚本如下：**

```javascript
if(binds["status"].value=="offline"){
  return true;
} else {
  return false;
}
```

**在线绑定脚本如下：**

```javascript
if(binds["status"].value=="online"){
  return true;
} else {
  return false;
}
```

## 1.5.保存数据；
# 2.通信配置
先点击图层空白处，再点击“通信”标签，**<font style="color:#DF2A3F;">通信方式选择“websocket”</font>**，进行如下配置；

![通信配置](./img/LLlCZtaV52hr66XH/1733283296790-477072c9-d61a-4a65-aede-431a83ba5e1a-858533.png)

URL地址说明如下：

<u>/iot/device/ws/state/RVsnhDTSfPZvMh1US4Zp/mohGkGqywhyyeNi8D4Qg3Mo9iSgf5nXj</u>

![1733301146669-ab4f0f90-167d-4904-918d-34c134c4b57e.png](./img/LLlCZtaV52hr66XH/1733301146669-ab4f0f90-167d-4904-918d-34c134c4b57e-063391.png)

URL相关取值说明如下：

![1733293540671-e13e4308-e0d0-4bba-9276-3cdb9eb2324f.png](./img/LLlCZtaV52hr66XH/1733293540671-e13e4308-e0d0-4bba-9276-3cdb9eb2324f-004837.png)

# 3.组态配置
## 3.1.拖拉设计控件到图层
![1733295683142-211b2993-f6e4-4caa-9830-83c41a0e1592.png](./img/LLlCZtaV52hr66XH/1733295683142-211b2993-f6e4-4caa-9830-83c41a0e1592-500100.png)

## 3.2.选中控件，打开“数据”标签后，进行数据绑定；
![1733295919867-78501c96-5085-4e16-8542-7734ccaa87fc.png](./img/LLlCZtaV52hr66XH/1733295919867-78501c96-5085-4e16-8542-7734ccaa87fc-694721.png)

# 4.效果展示
## 4.1.物联网平台模拟设备上下线操作；
![1733296457659-59557b93-4360-4f01-b875-e6035182e230.png](./img/LLlCZtaV52hr66XH/1733296457659-59557b93-4360-4f01-b875-e6035182e230-216878.png)

## 4.2.组态预览界面中查看效果；
![1733296827219-c166d608-4d24-4c1a-baec-652044b67368.gif](./img/LLlCZtaV52hr66XH/1733296827219-c166d608-4d24-4c1a-baec-652044b67368-674284.gif)



> 更新: 2024-12-04 16:35:34  
> 原文: <https://www.yuque.com/iot-fast/ksh/sqo6vq1w3b7w4zu5>