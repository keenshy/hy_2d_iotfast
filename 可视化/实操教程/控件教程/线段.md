# 线段

# <font style="color:rgb(51, 51, 51);">1、应用场景</font>

<font style="color:rgb(51, 51, 51);">线段控件是 2D 组态中用于绘制直线的基本元素，可用于构建各种图形和界面布局。</font>

# <font style="color:rgb(51, 51, 51);">2、操作示例</font>

## 2.1、线的四种状态

<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">线段控件在编辑时具有四种状态和效果：直线、镜像、断开和不对等。接下来详细介绍每种状态。</font>

<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">在绘制一条线段后，双击或右击弹窗点击【开始编辑】进入线段编辑状态。</font>

![1722582883481-5168f6d7-4ee3-4af6-b110-844afb41ff3f.png](./img/B3KmzK5wDPQP_MXe/1722582883481-5168f6d7-4ee3-4af6-b110-844afb41ff3f-210184.png)

<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">选择某个线段点，右击选择【切换点】</font>

![1722583219972-e2ac0522-610a-4e8f-8941-c689e4581279.png](./img/B3KmzK5wDPQP_MXe/1722583219972-e2ac0522-610a-4e8f-8941-c689e4581279-793185.png)

### 2.1.1、直线

<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">线段初始绘制默认为直线状态，用户可以通过双击点来快速切换直线和镜像状态。</font>

![1722583191885-831a08a8-6b10-43fc-8d91-ff8c82658b08.gif](./img/B3KmzK5wDPQP_MXe/1722583191885-831a08a8-6b10-43fc-8d91-ff8c82658b08-174624.gif)

### 2.1.2、镜像

镜像状态下，操作点的一端会带动另一端相对于该点呈现一样的效果。

![1722583522945-4a5f2742-b0f7-407d-8f3f-c48ac2a6a6d0.gif](./img/B3KmzK5wDPQP_MXe/1722583522945-4a5f2742-b0f7-407d-8f3f-c48ac2a6a6d0-817290.gif)

### 2.1.3、断开

在断开状态下，操作点的一端与另一端独立互不影响。

![1722583559426-7b264d8b-56fd-4268-9071-498cfd6b2bd4.gif](./img/B3KmzK5wDPQP_MXe/1722583559426-7b264d8b-56fd-4268-9071-498cfd6b2bd4-274049.gif)

### 2.1.4、不对等

在不对等状态下，操作点的一端会改变另一端的方向，但是线相对于点的幅度是保持不变的。

![1722583642536-f94d8c2a-4d1c-43bd-85d7-77bfacd6562a.gif](./img/B3KmzK5wDPQP_MXe/1722583642536-f94d8c2a-4d1c-43bd-85d7-77bfacd6562a-570615.gif)

## 2.2、线的吸附效果实现

<font style="color:rgb(36, 41, 47);">线段上的点具有吸附功能，目前点只能吸附到</font>**<font style="color:rgb(36, 41, 47);">单个节点</font>**<font style="color:rgb(36, 41, 47);">上。一旦点吸附到节点上，节点会执行相应的动作，而带有点的线段的相应部分也会跟随执行动作。</font>

<font style="color:rgb(36, 41, 47);">通过将线上的点吸附节点与动画（如旋转、移动等）结合，可以模拟采油机等运作效果，使得组态页面更加生动。</font>

<font style="color:rgb(36, 41, 47);">下面将通过简单案例进行介绍。</font>

1. <font style="color:rgb(36, 41, 47);">绘制线段并调整其样式</font><font style="color:#DF2A3F;">(必须步骤)</font>

![1722584350340-97ee3eca-08cd-4d3a-ad05-f1185c9dd072.png](./img/B3KmzK5wDPQP_MXe/1722584350340-97ee3eca-08cd-4d3a-ad05-f1185c9dd072-305195.png)

2. <font style="color:rgb(36, 41, 47);">双击编辑线段</font><font style="color:#DF2A3F;">(必须步骤)</font>

<font style="color:rgb(36, 41, 47);">选择线条上的一个点，长按 Alt 键，拖动点到要吸附的位置。当点的颜色从灰色变为绿色时，表示吸附成功，可以释放鼠标和 Alt 键。</font>

![1722585239094-69c33e92-41fa-46fe-889d-26807bb55498.png](./img/B3KmzK5wDPQP_MXe/1722585239094-69c33e92-41fa-46fe-889d-26807bb55498-706430.png)

3. 锚点设置(非必须步骤)

<font style="color:rgb(36, 41, 47);">重新设置采油机轴的锚点，使其在旋转时仿佛固定在采油基底上，效果生动形象。关于锚点的更多信息，请参阅</font>\[《锚点的介绍和使用》]\(https://www.yuque.com/iot-fast/ksh/qzvk2aeqggvd6535?singleDoc# 《锚点介绍和使用》)

![1722585982630-891922b7-853d-4fed-85ac-d2e7b29688c6.gif](./img/B3KmzK5wDPQP_MXe/1722585982630-891922b7-853d-4fed-85ac-d2e7b29688c6-791836.gif)

4. 蓝图交互配置(非必须步骤)

![1722586756551-350db0e6-6ae1-4244-aa8b-6f939c7e4aca.png](./img/B3KmzK5wDPQP_MXe/1722586756551-350db0e6-6ae1-4244-aa8b-6f939c7e4aca-692687.png)

<font style="color:rgb(36, 41, 47);">整个配置过程请参见下方的视频。</font>

[音视频附件: 锚点与旋转动画.mp4](./attachments/B3KmzK5wDPQP_MXe\锚点与旋转动画.mp4)

## <font style="color:rgb(51, 51, 51);">2.3 设置动画效果</font>

<font style="color:rgb(51, 51, 51);">控件动画效果是控件对于一个或多个数据条件的动画响应功能，当指定数据满足设置的指定条件（支持判断条件组合）时，实时曲线图控件进行显隐，旋转，闪烁</font>

<font style="color:rgb(51, 51, 51);">例如为实时曲线图控件设置显隐动画效果，当变量达到判断条件时，曲线图控件进行隐藏</font>

<font style="color:rgb(51, 51, 51);">数据栏设置</font>

![1723711146607-c6926a9f-62c8-45df-8689-c5fb1c542105.png](./img/B3KmzK5wDPQP_MXe/1723711146607-c6926a9f-62c8-45df-8689-c5fb1c542105-812096.png)

动画栏设置

![1721800090954-821f8d76-f67a-4670-861e-04bfc51c3471.png](./img/B3KmzK5wDPQP_MXe/1721800090954-821f8d76-f67a-4670-861e-04bfc51c3471-180016.png)

## <font style="color:rgb(51, 51, 51);">2.4、样式设置</font>

<font style="color:rgb(51, 51, 51);">在为控件做完数据设置之后，为了适应组态画面，以达到展示的美观性，可为控件进行一些样式设置，可设置线段的线条样式、虚线线条样式、背景、前景以及阴影</font>

![1723711333509-70b96250-9668-42b6-9226-cbc12b19a9e2.png](./img/B3KmzK5wDPQP_MXe/1723711333509-70b96250-9668-42b6-9226-cbc12b19a9e2-971727.png)


> 更新: 2024-08-15 16:43:29  
> 原文: <https://www.yuque.com/iot-fast/ksh/bvxoht5z039ckr0c>