# 编辑器

<font style="color:rgb(28, 30, 33);">Editor 主要包含了一些编辑过程用到的控制器和工具。比较主要的有节点选择控制器 SelectControl，图形变换控制器 TransformControl，拖拽控制 DragControl，点位拾取 getPointService 等等。</font>

## <font style="color:rgb(28, 30, 33);">获取 Editor 对象</font>
```javascript
const app = new Application({
  container: document.getElementById("container"),
});
const editor = app.Editor;
```

## <font style="color:rgb(28, 30, 33);">属性 & 方法</font>
| 名称 | 返回类型 | 描述 | 示例 |
| --- | --- | --- | --- |
| Status | None = 0   Selecting = 1 << 0   Select = 1 << 1   Transform = 1 << 2   Link = 1 << 3   Drag = 1 << 4   GetPoint = 1 << 5   DragPoint = 1 << 6   GetRect = 1 << 7   All = (1 << 10) - 1} | 获取/设置编辑器状态 | `editor.Status`<br/> `editor.Status = EditorStatus.Select` |
| getPoint | Promise<PointServiceResult> | 获取点位服务 | `editor.getPoint()` |
| getRect | Promise<RectServiceResult> | 获取矩形服务 | `editor.getRect()` |
| getObjects | Promise<NodeServiceResult> | 获取选中的节点 | `editor.getObjects()` |
| cancel | void | 取消操作 | `editor.cancel()` |


_<font style="color:rgb(28, 30, 33);">通常来说，只需要掌握 Editor 上面的属性方法就可以了，不会直接调用 Editor 底下的这些控制器，而是通过 Editor 来调用。 所以只简单介绍几个常用的控制器。</font>_

### <font style="color:rgb(28, 30, 33);">SelectControl</font>
```javascript
const selectControl = editor.SelectControl;
```

| 名称 | 返回类型 | 描述 | 示例 |
| --- | --- | --- | --- |
| SelectAllObjects | (BaseNode | CollectionRecord)[] | 所有被选中的对象，包含节点和组合 | `selectControl.SelectAllObjects` |
| SelectAllNodes | BaseNode[] | 所有被选中的节点，包含组内的子节点 | `selectControl.SelectAllNodes` |
| SelectNodes | BaseNode[] | 获取/设置选中的节点 | `const nodes = selectControl.SelectNodes`<br/> `selectControl.SelectNodes = node` |
| SelectGroups | CollectionRecord[] | 获取/设置选中的组合 | `const groups = selectControl.SelectGroups`<br/> `selectControl.SelectGroups = group` |
| addSelectNodes | (nodes: (BaseNode | CollectionRecord)[], { clear: boolean; applyGroup: boolean; fromRoot: boolean } = false ): void      clear 是否清空;   applyGroup 是否应用分组   fromRoot 是否从根节点 | 添加选中的节点 | `selectControl.addSelectNodes(nodes)` |
| addSelectGroups | (groups: CollectionRecord[], clear: boolean = false ): void   clear boolean 是否清空 | 添加选中的组合 | `selectControl.addSelectGroups(groups)` |
| cancel | void | 清除所有选择 | `selectControl.cancel()` |
| onSelect | (data: { nodes: BaseNode[], groups: CollectionRecord[], all: (BaseNode | CollectionRecord)[] }) => void | 选择事件 | `selectControl.onSelect.add((data) => console.log(data))` |
| hasSelect | boolean | 是否有选中 | `const isSelected = selectControl.hasSelect(node)` |


### <font style="color:rgb(28, 30, 33);">TransformControl</font>
```javascript
const transformControl = editor.TransformControl;
```

| 名称 | 返回类型 | 描述 | 示例 |
| --- | --- | --- | --- |
| append | void | 将节点添加至变换控制中 | `transformControl.append(node)` |
| show | void | 显示变换控制 | `transformControl.show()` |
| hide | void | 隐藏变换控制 | `transformControl.hide()` |
| clear | void | 清空变换控制 | `transformControl.clear()` |




> 更新: 2024-09-30 10:36:15  
> 原文: <https://www.yuque.com/iot-fast/ksh/ybbkzhzda0cek9lp>