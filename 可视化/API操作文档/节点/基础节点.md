# 基础节点

<font style="color:rgb(28, 30, 33);">基础节点是所有节点的基类，包含了节点的基本属性和方法，例如宽高，坐标，旋转，锚点等。</font>

<font style="color:rgb(28, 30, 33);">画布上的所有节点都是继承自基础节点的，都具有基础节点的属性和方法。</font>

<font style="color:rgb(28, 30, 33);">我们以比较容易理解的节点类型【矩形】节点为例，来介绍基础节点的属性和方法。 先看下矩形节点的大概实现：</font>

```javascript
class Rect extends BaseNode {
  static type = "Rect";
  protected _name = "矩形";
  protected anchor: Vector2d = { x: 0.5, y: 0.5 };
  ...
}
```

<font style="color:rgb(28, 30, 33);">Rect 类继承自 BaseNode。</font>

## <font style="color:rgb(28, 30, 33);">如何创建一个节点</font>
```javascript
const app = new Application({
  container: document.getElementById("container"),
});
const node = app.create({
  type: "Rect",
  x: 0,
  y: 0,
  width: 100,
  height: 100,
});
```

<font style="color:rgb(28, 30, 33);">借助</font><font style="color:rgb(28, 30, 33);"> </font>`<font style="color:rgb(28, 30, 33);">Application</font>`<font style="color:rgb(28, 30, 33);"> </font><font style="color:rgb(28, 30, 33);">的</font><font style="color:rgb(28, 30, 33);"> </font>`<font style="color:rgb(28, 30, 33);">create</font>`<font style="color:rgb(28, 30, 33);"> </font><font style="color:rgb(28, 30, 33);">方法，我们可以这样在画布坐标(0, 0)处，创建一个宽高为 100 的矩形节点。</font>

`<font style="color:rgb(28, 30, 33);">node</font>`<font style="color:rgb(28, 30, 33);">就是我们创建出的矩形节点，它继承自基础节点。</font>

<font style="color:rgb(28, 30, 33);">尝试下面的代码，通过基础节点的属性和方法，来操作矩形节点：</font>

```javascript
const id = node.NodeId; // 获取节点的唯一标识
node.Background = "red"; // 将节点的背景颜色设置为红色
node.Width = 200; // 将节点的宽度设置为 200
node.Name = "矩形1"; // 将节点的名称设置为 矩形1
```

## <font style="color:rgb(28, 30, 33);">常用的属性和方法</font>
| 属性/方法 | 类型 | 描述 | 示例 |
| --- | --- | --- | --- |
| Name | get/set | 获取/设置节点的名称 | `node.Name`<br/> `node.Name = "矩形1"` |
| Width | get/set | 获取/设置节点的宽度 | `node.Width`<br/> `node.Width = 100` |
| Height | get/set | 获取/设置节点的高度 | `node.Height`<br/> `node.Height = 100` |
| Scale | get/set | 获取/设置节点的缩放比例 | `node.Scale`<br/> `node.Scale = { x: 2, y: 2 }` |
| Position | get/set | 获取/设置节点的坐标位置 | `node.Position`<br/> `node.Position = { x: 100, y: 100 }` |
| Rotation | get/set | 获取/设置节点的旋转角度 | `node.Rotation`<br/> `node.Rotation = 45` |
| Anchor | get/set | 获取/设置节点的锚点 | `node.Anchor`<br/> `node.Anchor = { x: 0.5, y: 0.5 }` |
| Background | get/set | 获取/设置节点的背景颜色 | `node.Background`<br/> `node.Background = "red"` |
| nodeConfig | get/set | 获取/设置节点的基础样式配置信息 | `node.nodeConfig`<br/> `node.nodeConfig = { ...node.nodeConfig, fill: 'red' }` |
| RenderIndex | get/set | 获取/设置节点的渲染层级，这将决定节点与相邻节点的渲染顺序 | `const index = node.RenderIndex`<br/> `node.RenderIndex = 10` |
| Intance | get | 获取渲染节点实例 | `node.Intance` |
| IsOnScreen | get | 获取节点是否在屏幕内 | `const isOnScreen = node.IsOnScreen` |
| ClientRect | get | 获取节点的包围盒 | `const rect = node.ClientRect` |
| Matrix | get | 获取节点的变换矩阵 | `const matrix = node.Matrix` |
| NodeId | get | 获取节点的唯一标识 | `const id = node.NodeId` |
| AbsoluteVisible | get | 获取节点的绝对可见性 | `const visible = node.AbsoluteVisible` |
| LayerId | get/set | 获取/设置节点的所在图层 | `node.LayerId`<br/> `node.LayerId = layer` |
| CanCache | get | 获取节点是否可缓存 | `node.CanCache` |
| cache | method | 缓存节点 | `node.cache()` |
| getData | method | 获取节点的自定义属性 | `const data = node.getData()` |
| updateData | method | 更新节点 | `node.update()` |
| clone | method | 克隆节点 | `const cloneNode = node.clone()` |
| copyFrom | method | 从另一个节点复制属性（完全覆盖原来的属性） | `node.copyFrom(otherNode)` |
| copyStylesFrom | method | 从另一个节点复制样式（只复制样式） | `node.copyStylesFrom(otherNode)` |
| erase | method | 删除节点 | `node.erase()` |
| Animations | get | 获取查看节点关联的动画列表 | `const animations = node.Animations` |
| addAnimation | method | 添加动画 | `node.addAnimation(animation)` |
| removeAnimation | method | 移除动画 | `node.removeAnimation(animation)` |
| doAnimation | method | 执行节点上面的所有动画 | `node.doAnimation()` |
| renderToDom | method | 渲染成 dom 节点 | `node.renderToDom()` |
| cancelRenderDom | method | 取消渲染 dom 节点 | `node.cancelRenderDom()` |
| updateRenderDom | method | 更新 dom 节点 | `node.updateRenderDom()` |
| GroupId | get/set | 获取/设置节点的所在组合 | `node.GroupId`<br/> `node.GroupId = group` |
| _toJSON | method | 序列化节点 | `const json = node._toJSON()` |
| _fromJSON | method | 反序列化节点 | `node._fromJSON(json)` |
| on | method | 监听节点事件 | `node.on("click", () => {})` |
| off | method | 移除节点事件监听 | `node.off("click", () => {})` |


<font style="color:rgb(28, 30, 33);">通过常用的属性和方法，我们可以很方便的操作节点，实现我们想要的效果。</font>

<font style="color:rgb(28, 30, 33);">类似于矩形节点</font>`<font style="color:rgb(28, 30, 33);">Rect</font>`<font style="color:rgb(28, 30, 33);">, 我们还有许多内置的基础节点类型可以创建，只需要修改代码中的</font>`<font style="color:rgb(28, 30, 33);">type</font>`<font style="color:rgb(28, 30, 33);">即可。</font>

```javascript
/*
Circle 圆形节点
Text 文本节点
Arrow 箭头节点
Curve 曲线节点
Edge 线
Triangle 三角形
Ellipse 椭圆
Parallelogram 平行四边形
RegularPolygon 多边形
Star 星形
Gif Gif 节点
Video 视频节点
Image 图片节点
IframeNode iframe 节点
...
*/
const textNode = app.create({
  type: "Text",
});
textNode.Text = "我是一个文本节点"; // Text是文本类型节点的特有属性，表示文本内容
```



> 更新: 2024-09-30 10:36:52  
> 原文: <https://www.yuque.com/iot-fast/ksh/fg1go5g5kk0llvko>