# 事件

<font style="color:rgb(28, 30, 33);">应用和节点上可以绑定多种事件，通过事件可以实现节点的交互、动画等效果。 事件的监听和移除监听，通过调用 </font>`<font style="color:rgb(28, 30, 33);">Appclication</font>`<font style="color:rgb(28, 30, 33);"> 或者 </font>`<font style="color:rgb(28, 30, 33);">BaseNode</font>`<font style="color:rgb(28, 30, 33);"> 的</font>`<font style="color:rgb(28, 30, 33);">on</font>`<font style="color:rgb(28, 30, 33);">和</font>`<font style="color:rgb(28, 30, 33);">off</font>`<font style="color:rgb(28, 30, 33);">方法来实现。</font>

## <font style="color:rgb(28, 30, 33);">全局事件</font>
<font style="color:rgb(28, 30, 33);">全局事件是整个应用中的事件。当这个事件发生时，所有监听这个事件的回调函数都会被调用。</font>

<font style="color:rgb(28, 30, 33);">我们既可以在</font>`<font style="color:rgb(28, 30, 33);">Appclication</font>`<font style="color:rgb(28, 30, 33);">实例上监听事件，也可以在某个</font>`<font style="color:rgb(28, 30, 33);">BaseNode</font>`<font style="color:rgb(28, 30, 33);">节点上监听事件。你可以根据自己的需求来选择监听的位置。</font>

```javascript
import { AppEvent2D } from "@i2d/engine2d";

const app = new Application({
  container: document.getElementById("container"),
});

// 应用被加载完成后触发
app.on("loadComplete", (e) => {
  console.log("load complete", e);
});

// AppEvent2D是专门用于事件处理的类，你可以直接使用，效果和在app上监听是一样的
// 上面的代码等同于
AppEvent2D.on("loadComplete", (e) => {
  console.log("load complete", e);
});

// 移除监听
app.off("loadComplete", (e) => {
  console.log("load complete", e);
});

// 在节点上监听
const node = app.getNodeById(102);
node.on("loadComplete", (e) => {
  console.log("load complete", e);
});
```

| 事件名称 | 说明 |
| --- | --- |
| `load` | 应用加载 |
| `loadComplete` | 加载完成 |
| `newFile` | 新建文件 |
| `remove` | 移除节点 |
| `append` | 添加新的节点 |
| `moveIndex` | 移动节点位置 |
| `updateName` | 更新节点名称 |
| `appendGroup` | 添加新的组合块 |
| `appendLayer` | 添加新的图层 |
| `loadAnimation` | 加载动画 |
| `appendAnimation` | 添加新的动画 |
| `removeAnimation` | 移除动画 |
| `updateAnimation` | 更新动画 |
| `dataChange` | 节点数据改变时 |
| `activeLayerChange` | 当前激活图层改变时 |
| `paste` | 粘贴操作 |
| `fastCopy` | 快捷复制操作 |
| `renderAsDom` | 渲染为 DOM |


## <font style="color:rgb(28, 30, 33);">普通节点事件</font>
<font style="color:rgb(28, 30, 33);">这一类事件是针对节点的，当节点上发生这些事件时，会触发相应的回调函数</font>

<font style="color:rgb(28, 30, 33);">只在</font>`<font style="color:rgb(28, 30, 33);">BaseNode</font>`<font style="color:rgb(28, 30, 33);">节点上监听以下事件</font>

```javascript
const node = app.getNodeById(102);
// 当节点被点击时触发
node.on("click", (e) => {
  console.log("click", e);
});
```

| 事件名称 | 说明 |
| --- | --- |
| `mouseover` | 鼠标移入 |
| `mouseout` | 鼠标移出 |
| `mouseenter` | 鼠标进入 |
| `mouseleave` | 鼠标离开 |
| `mousemove` | 鼠标移动 |
| `mousedown` | 鼠标按下 |
| `mouseup` | 鼠标抬起 |
| `wheel` | 鼠标滚轮滚动 |
| `click` | 鼠标点击 |
| `dblclick` | 鼠标双击 |
| `touchstart` | 触摸开始 |
| `touchmove` | 触摸移动 |
| `touchend` | 触摸结束 |
| `tap` | 点击 |
| `dbltap` | 双击 |
| `pointerdown` | 指针按下 |
| `pointermove` | 指针移动 |
| `pointereup` | 指针抬起 |
| `pointercancel` | 指针取消 |
| `pointerover` | 指针进入 |
| `pointerenter` | 指针进入 |
| `pointerout` | 指针离开 |
| `pointerleave` | 指针离开 |
| `pointerclick` | 指针点击 |
| `pointerdblclick` | 指针双击 |




> 更新: 2024-09-30 10:37:54  
> 原文: <https://www.yuque.com/iot-fast/ksh/ordvg39u3phbw2tg>