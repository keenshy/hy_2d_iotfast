# 教程丨十分钟实现可燃气体探测器组态数据采集

本文将通过可燃气体探测器数据采集的组态案例和大家分享一款名为IoT-Fast的免费软件。

![20220429143219.png](./img/_QfDHW5h96kRQ8dD/1651737894246-ad96be3c-6978-451d-95b7-0387896621bf-459338.png)

软件集合了数据采集、上报云端、图形组态为一体，仅三步就让你快速完成设备的数据采集控制组态项目，下面我们详细介绍该套软件的操作案例，以采集可燃气体探测器数据为例，文章主要分为五个部分：

+ 前期准备

> 可燃气体探测器设备概述
>

+ IoT-Fast-采集控制系统

> 对底层设备进行数据读取、写入的配置界面，还可以进行数据处理。
>

+ IoT-Fast-云平台

> 将采集控制系统收集的数据进行分类展示、告警阈值设置、历史数据查询等功能。
>

+ IoT-Fast-云组态

> 进行2D组态，组态元素绑定云平台上展示的数据，来进行动作的执行或是数据展示。
>

+ IoT-Fast-App

> 通过手机app进行远程数据的查看，以及动作的执行。
>

## 一、前期准备
### 1.1 准备工具
该设备为无线可燃气体探测器（NB-IOT），采用简易式壁挂安装，安装调试便捷快速。

![20220516142043.png](./img/_QfDHW5h96kRQ8dD/1652690307288-6a86ea38-6d93-4579-aa99-fd1f11a90d3f-539832.png)

## 三、IoT-Fast-采集控制系统
使用IoT-Fast采集控制系统对可燃气体探测器进行采集。

![20220516142515.png](./img/_QfDHW5h96kRQ8dD/1652690307229-5a6cac5d-04ec-4c42-b67a-e9652df9ba97-602435.png)

### 1.控件选择
设备采用NB-IOT联网方式，支持http通讯协议，所以从左边的采集引擎中拖出http in 节点。选择设备数据请求方式，填写URL地址。

![20220516142919.png](./img/_QfDHW5h96kRQ8dD/1652690307256-c668124f-57ff-44eb-aeca-8a8c68be8c64-318109.png)

此时先拉取一个调试节点调试部署，从右方调试窗口得到数据，验证通讯成功。

![20220516143346.png](./img/_QfDHW5h96kRQ8dD/1652690307202-d065b921-7c58-45fb-a219-1682df7ebd3d-512951.png)

能够成功获取设备数据，我们需要回传数据传输成功的信息。

![20220516144822.png](./img/_QfDHW5h96kRQ8dD/1652690307240-ea3f721c-756e-433e-a931-5b5a5df23606-174955.png)

为了探测器上报的数据能传到云平台，我们需要对设备传输的数据格式进行调整，部署function函数节点。

![20220516144243.png](./img/_QfDHW5h96kRQ8dD/1652690307254-0a98503b-8624-4930-8a45-c6868b5b681c-965732.png)

格式我们可以从云平台创建好的燃气探测器设备调试窗口中复制，具体云平台如何创建设备详见下文。

![20220516163000.png](./img/_QfDHW5h96kRQ8dD/1652690307246-ba7aa8bd-00c1-4f5a-a172-10d4861edf48-358347.png)

文章末尾附上快速复用码，导入便可快速部署。

## 四、IoT-Fast-云平台
**IoT-Fast云**平台能够与IoT-Fast采集控制系统进行联动，将采集到的数据可视化。

![1699004449564-cba646d9-424f-4564-b514-e2feeda93a64.png](./img/_QfDHW5h96kRQ8dD/1699004449564-cba646d9-424f-4564-b514-e2feeda93a64-985219.png)

### 1. 产品和设备的创建
登录**IoT-Fast云平台**，依次点击设备管理-产品-创建产品。

![20220516145029.png](./img/_QfDHW5h96kRQ8dD/1652690307245-53e1e0dd-7459-4bbb-bdfb-20712c40c9c1-501792.png)

然后在该产品下创建一个设备，操作顺序如下图，选择上一步创建的产品，设置设备名称，最后点击确定即可。

![20220516145117.png](./img/_QfDHW5h96kRQ8dD/1652690307244-9ee770dc-e7d3-418a-aead-d123b756ee44-440164.png)

### 2. 采集量的定义
回头查看刚刚创建的产品，在功能定义中，自定义功能中添加采集量。

![20220506151300.png](./img/_QfDHW5h96kRQ8dD/1651906912105-3a58500b-b4b1-4db2-a36d-44ca87aa365e-485427.png)

**注**：**标识符**一定要和采集函数节点中的**标识符**一致，功能名称无所谓。

![20220516145621.png](./img/_QfDHW5h96kRQ8dD/1652690307238-43dc0afa-abbd-4884-afd2-b4c561eab1bf-028704.png)

所有探测器功能自定义添加完成如下：

![20220516145736.png](./img/_QfDHW5h96kRQ8dD/1652690307227-13243d48-38a7-4140-8bf3-42e37daee833-458522.png)

### 3. 可视化控件部署调试
回到**IoT-Fast采集控制系统**，在**IoT-Fast云平台**中拖出**设备上行控件**，点击节点进行产品设备的选择配置。

![20220516150011.png](./img/_QfDHW5h96kRQ8dD/1652690307278-f8923c16-5c46-478d-9d7c-028e87d1fc61-288393.png)

控件显示连接成功后，即可回到**IoT-Fast云平台**，在设备的运行状态中可以实时显示可燃气体探测器设备监测数据。

![20220516150126.png](./img/_QfDHW5h96kRQ8dD/1652690307230-e7550e64-1bfb-424d-9aad-fb84a985cbe7-110137.png)

## 五、IoT-Fast-云组态
完成组态的创建需要以下三个小步骤：

### 4.1 创建项目及应用
点击云组态按钮进入**云组态**首页。

![20220414135338.png](./img/_QfDHW5h96kRQ8dD/1650779619533-5fa7fd6b-9b00-485b-956d-71b9e21056b2-388113.png)

先新建一个项目，填写项目名称，保存，进入项目。

![20220428151312.png](./img/_QfDHW5h96kRQ8dD/1651737894229-d1742e3a-0ca7-421d-a13c-714929891ac2-877815.png)

点击**应用**-**我的应用**，点击图示位置新增一张图纸，来构建组态。

![20220415151014.png](./img/_QfDHW5h96kRQ8dD/1650779619563-c44420ce-b44b-4355-a33c-0edc9ef6c758-705329.png)

填写图纸名称后就可以开始画组态图了。

### 4.2 设计所需模型图标
以在左侧项目树中选择**图标**使用现成的组件，也可以在**设计**中设计自己需要的组件。设计完成的个性化组件可以直接拉到后面你所创建项目图纸中，重复使用，方便快捷。

![20220425142423.png](./img/_QfDHW5h96kRQ8dD/1651735624546-9fe25fd0-d9e3-4bc9-8693-83f4aa0ca7d9-863411.png)

下面以可燃气体探测器为例，根据一张图介绍软件绘画中涉及线段、图形、文本、图形对齐的编辑方式，以及修改图形的背景颜色、线条宽度等操作。具体操作入径如下图所示。

![1699004556575-d2476cbb-f610-441e-9141-79cc298f8569.png](./img/_QfDHW5h96kRQ8dD/1699004556575-d2476cbb-f610-441e-9141-79cc298f8569-954797.png)

### 4.3 绑定云平台数据
组件基础部分设计完成后，即可拖拽至项目应用图纸中。首先我们需要从图标栏中的基础部分拖出“数字”模块。

![20220516151036.png](./img/_QfDHW5h96kRQ8dD/1652690307254-0b7802b5-0022-43ab-a653-8573646913af-503914.png)

修改对应颜色后，即可点击数据源按钮进行数据的绑定。原理是通过采集系统采集到的设备燃气浓度数据上传至云平台的数据绑定到组态上。

![20220516151435.png](./img/_QfDHW5h96kRQ8dD/1652690307300-d2b0dc82-f3fc-43df-a2bd-d39b60604916-686720.png)

点击数据源按钮，在弹出的标签页中**选择数据源**-设备，**来源**-我的，**产品**-云平台创建的产品，**设备**-云平台创建的设备，**属性**-选择燃气浓度，点击确定。图形下方的的电源指示灯以及其他的设备数据源同理，进行绑定。

全部完成后点击**保存**，然后点击右上角的**预览**，即可查看组态的可燃气体探测器采集动态效果。

![20220516154200.png](./img/_QfDHW5h96kRQ8dD/1652690307259-f2121e70-ca8c-4308-8430-7e827aa938ad-670967.png)

## 五、IoT-Fast-微信小程序/APP
软件上的数据支持在**微信小程序**或者**APP**上查看，小程序和APP的二维码在**云平台**首页的右侧，目前只支持安卓APP，ios的用户可以直接用微信小程序查看。

![1699004588986-deb218d5-22ee-4599-bd67-476c42e8e70d.png](./img/_QfDHW5h96kRQ8dD/1699004588986-deb218d5-22ee-4599-bd67-476c42e8e70d-221763.png)

扫码进入IoT-Fast小程序，输入PC端注册的账号密码进入首页。

![1699004315735-06ce52c4-0382-4614-8d66-07fb7f35560d.png](./img/_QfDHW5h96kRQ8dD/1699004315735-06ce52c4-0382-4614-8d66-07fb7f35560d-039727.png)![20220506163955.png](./img/_QfDHW5h96kRQ8dD/1651906912161-c2355cb1-807e-4e97-aad6-0ae29d128de8-145516.png)



选择可燃气体探测器设备，点击查看可以看到设备的详细信息。

![20220516154544.png](./img/_QfDHW5h96kRQ8dD/1652690307286-46e19ebb-a2ba-4986-be22-2dc2e701f477-212709.png)

点击运行状态右侧箭头可以查看设备的实时数据。

![20220516154623.png](./img/_QfDHW5h96kRQ8dD/1652690307204-d13aee7b-c162-44a7-89a5-c89d9e65c2e9-766762.png)

![20220516154709.png](./img/_QfDHW5h96kRQ8dD/1652690307367-9d32d6c3-a21e-484a-9f39-1c85775ba86a-328169.png)

回到首页，点击组态查看该账号下的所有组态，选择可燃气体探测器这个组态，点击查看。

![20220516154808.png](./img/_QfDHW5h96kRQ8dD/1652690307327-9f99d4de-1237-4b40-af35-4618307de400-656712.png)

![20220516154846.png](./img/_QfDHW5h96kRQ8dD/1652690307259-13db24e6-874a-46cd-a521-fea5636e5adc-068240.png)



> 更新: 2024-03-21 14:19:49  
> 原文: <https://www.yuque.com/iot-fast/ckyq/sygngs>