# 采集labVIEW数据，IoT-Fast帮你搞定

第三方软件如何获取**labVIEW**数据，**IoT-Fast**来帮忙，**IoT-Fast**<font style="color:rgb(44, 62, 80);">是一款</font>集合了数据采集、上报云端、图形组态为一体的软件

文章以**labVIEW**模拟数值为例，包括TCP的vi编程，采集，上云，组态，共分为五个部分：

+ **labVIEW**介绍

> 简单介绍labVIEW，编写TCP连接的程序框图和前面板。
>

+ **IoT-Fast-**采集控制系统

> 对底层设备进行数据读取、写入的配置界面，还可以进行数据处理。
>

+ **IoT-Fast**-云平台

> 将采集控制系统收集的数据进行分类展示、告警阈值设置、历史数据查询等功能。
>

+ **IoT-Fast**-云组态

> 进行2D组态，组态元素绑定云平台上展示的数据，来进行动作的执行或是数据展示。
>

+ **IoT-Fast**-微信小程序/App

> 通过微信小程序或者手机app进行远程数据的查看，以及动作的执行。
>

### 一、labVIEW
**labVIEW**是一种程序开发环境，使用的是图形化编辑语言G编写程序，我们需要用labVIEW模拟数据，然后**IoT-Fast**通过TCP协议获取到数据进行处理展示。

![20220601111226.png](./img/RCFWBwzcf828eLfV/1654148583946-c0a4a591-2c8f-48c6-b037-23b7d05a3876-834282.png)

打开labVIEW，创建一个vi，编写一个TCP的程序框图如下，TCP的ip为本机ip，端口这里写的是2000。

![20220601112525.png](./img/RCFWBwzcf828eLfV/1654148583985-d8a84a8b-915d-4861-9b92-9a39d014b8e2-860352.png)

前面板是一个字符串输入控件，配上确定按钮，编写完成后点击左上角的运行按钮，让程序运行起来。

![20220601113058.png](./img/RCFWBwzcf828eLfV/1654148583998-f23acd14-78d1-44d7-b571-a5460ba5a6c0-455203.png)

### 二、**IoT-Fast**-采集控制系统
打开IoT-Fast的**采集控制**系统，选择左边的节点，按住鼠标左键拖入到中间的配置栏。

![20220601113513.png](./img/RCFWBwzcf828eLfV/1654148584019-c00684aa-30c0-4fe0-91bd-c231394b3e6c-070205.png)

从左侧的控件栏拉出一个**TCP in**控件和一个**调试**控件。

![20220601113849.png](./img/RCFWBwzcf828eLfV/1654148583966-15c7066c-48ef-4c3a-bd29-3898cbcbdf83-844945.png) ![20220601113827.png](./img/RCFWBwzcf828eLfV/1654148583963-44b6212c-cf24-4a16-af58-37aa5c16ce94-808521.png)

双击**TCP in**控件配置连接IP和端口。

![20220601114041.png](./img/RCFWBwzcf828eLfV/1654148584000-dd11f25c-b4b9-44db-88e7-1c66545173ae-480004.png)

按住白色小框可以拉出一条线连接上另一个白色小框。这样就将两个控件用线连接起来，数据是**从左往右**流动的，最后流入调试控件就会在右侧的调试窗口显示。

![20220601114232.png](./img/RCFWBwzcf828eLfV/1654148584024-aef6a5a5-b32c-489e-846e-8b8e6d8e9938-830730.png)

按下图连接后点击右上角的**部署**按钮，将右侧的界面调到**调试窗口**，部署完成后**TCP in**显示已连接。

![20220601114404.png](./img/RCFWBwzcf828eLfV/1654148584044-bee493f6-250f-410b-89be-580e8c478a51-810020.png)

回到labVIEW的前面板，在输入框中写上发送的内容，然后点击确定。

![20220601114615.png](./img/RCFWBwzcf828eLfV/1654148583946-9cb90499-3872-457e-929f-1e267f72e84a-228368.png)

可以看到IoT-Fast这边收到了一串Buffer，说明连接是成功的，需要将Buffer做一下编码格式的处理在显示出来。

![20220601114716.png](./img/RCFWBwzcf828eLfV/1654148584125-1f423225-bf86-4a9d-ac67-fd3b6794e0c0-751373.png)

从左侧拉出**function**控件，将它放在调试控件的前面。

![20220601115138.png](./img/RCFWBwzcf828eLfV/1654148584043-a6444c4e-e273-425d-b15d-2eb31ce49fd5-947562.png)

双击编写代码，转成UTF-8的编码格式显示，完成后点击部署。

![20220601115533.png](./img/RCFWBwzcf828eLfV/1654148584057-d0395312-a8bb-4893-b7de-b0bdc848890e-126119.png)

回到labVIEW重新运行一下程序，等待**TCP in**显示已连接后，输入一串字符，点击确定按钮。

![20220601115906.png](./img/RCFWBwzcf828eLfV/1654148584076-8f988faa-1bb6-43f2-8890-e836d7f5f4ed-606553.png)

返回IoT-Fast，可以看到数据已经接收到了。

![20220601120041.png](./img/RCFWBwzcf828eLfV/1654148584028-9b0160c4-2529-40fd-9239-ac372059cc42-322942.png)

多试几下，调试窗口显示一致。

![20220601120133.png](./img/RCFWBwzcf828eLfV/1654148584002-f74cc3fa-c4c7-4669-8bc0-7a0218d6b813-603258.png) ![20220601120208.png](./img/RCFWBwzcf828eLfV/1654148584000-5ca42cc3-bffb-40ee-a805-be2bcf8100e7-865271.png)

![20220601120322.png](./img/RCFWBwzcf828eLfV/1654148584036-46dd2e06-ab2c-46ef-8e69-7ffd7728ce1d-103784.png)

回到labVIEW，再画一个程序框图，内容为频率1秒发送一次0-1之间的随机数，TCP端口为2001，点击运行。

![20220601134855.png](./img/RCFWBwzcf828eLfV/1654148584132-71d5e0a4-ad09-4e52-a802-b28e950ec00e-795292.png)

返回IoT-Fast，将**TCP in**的端口改为2001，部署，调试窗口每隔1秒就会输出一个随机数的字符串。

![20220601135158.png](./img/RCFWBwzcf828eLfV/1654148584092-f524dd1b-12dc-4f78-9b28-4c7bd4eef41b-438816.png)

双击**function**控件，将输出类型转成数值，部署，labVIEW重新点击运行。

![20220601135351.png](./img/RCFWBwzcf828eLfV/1654148584171-1d78e534-813d-4c75-9bba-7f22edabfbc5-293570.png)

调试窗口输出的数据类型就变为数值型了，数据读取到之后，就可以将数据传到**云平台**显示，然后再进行**云组态**。

![20220601135527.png](./img/RCFWBwzcf828eLfV/1654148584113-34334667-620d-49f9-aaee-81bee96aa84d-743082.png)

### 三、**IoT-Fast**-云平台
点击云平台按钮进入**云平台**首页。

![1699001009070-83d22a23-0730-4f66-bd83-67983aa2ea8e.png](./img/RCFWBwzcf828eLfV/1699001009070-83d22a23-0730-4f66-bd83-67983aa2ea8e-600259.png)

点击左侧**产品中心**-**产品开发**，新增一个产品，类别选择**自定义品类**。

![20220601140157.png](./img/RCFWBwzcf828eLfV/1654148584152-3b89fe35-cbf6-49ee-8deb-435921096671-990970.png)

查看创建的产品，在**功能定义**-**自定义参数**中新增属性。

![20220601140331.png](./img/RCFWBwzcf828eLfV/1654148584120-ce0957d1-9d32-4825-b814-349ee980cf9d-624677.png)

创建配置如下，**标识符**是采集控制和云平台能够对应上的关键字符，同一个产品中不能有重复的**标识符**。

![20220601140542.png](./img/RCFWBwzcf828eLfV/1654148584125-3e379e3d-a95c-4963-a554-39ab36571623-486101.png)

在**功能定义**-**分组**中创建一个上报分组，类型选择上报，将左边的点位全选，点击右箭头，加入到当前分组中。

![20220601140653.png](./img/RCFWBwzcf828eLfV/1654148584150-deecf715-da8c-4b66-a464-37f422cf909f-765144.png)

接着点击**产品中心**-**设备管理**，在该产品下增加一个设备。

![20220601140803.png](./img/RCFWBwzcf828eLfV/1654148584112-9a6e3368-d391-40a3-951c-073c82b3b72f-427317.png)

下一步将云平台和采集控制中的属性进行绑定，回到**采集控制**系统，从左侧云平台中拉出**iotfast云上行**控件，用于将采集的数据上报**云平台**。

![1698996759800-71cd019d-eb11-43fc-b106-008474eea9db.png](./img/RCFWBwzcf828eLfV/1698996759800-71cd019d-eb11-43fc-b106-008474eea9db-532380.png)

双击控件就可以选择刚刚在云平台创建的产品、设备和分组了。

![20220601140928.png](./img/RCFWBwzcf828eLfV/1654148584039-3573564a-b3a6-4d83-92ac-f32f2639a82e-472240.png)

将它接在**function**后面，然后双击**function**，将获取到的值赋到标识符的对象下。

![1698998359869-121b0074-12a1-4475-904c-254664b2fa59.png](./img/RCFWBwzcf828eLfV/1698998359869-121b0074-12a1-4475-904c-254664b2fa59-614100.png)

**function**中的代码如下，配置好后点击部署，labVIEW重新点击运行。

```javascript
msg.payload={
  "value":Number(msg.payload.toString('utf-8'))
}
return msg;
```

回到**云平台**，查看设备的**运行状态**，可以看到数据已经上传上来了。

![20220601141502.png](./img/RCFWBwzcf828eLfV/1654148584130-9ee8374e-8c05-417c-bc28-7aa529a8427a-918454.png)

这样便配置好了**采集控制**和**云平台**的联动，接着可以去**云组态**进行2D组态，用图形展示数据。

### 四、**IoT-Fast**-云组态
点击云组态按钮进入**云组态**首页。

![20220601142042.png](./img/RCFWBwzcf828eLfV/1654148584144-8320f9a9-eceb-43ec-b27a-734000bfa1f7-433489.png)

先新建一个项目，填写项目名称，保存，进入项目。

![20220601142113.png](./img/RCFWBwzcf828eLfV/1654148584153-c6bd41b1-c3bb-4a0f-a96c-dac62e3bfaf9-819243.png)

点击**应用**-**我的应用**，点击图示位置新增一张图纸，来构建组态。

![20220601142222.png](./img/RCFWBwzcf828eLfV/1654148584069-bc5ff08b-f648-4600-a67a-3023cfd45a90-781004.png)

填写图纸名称后就可以开始画组态图了。

![20220425141925.png](./img/RCFWBwzcf828eLfV/1651735624498-6170a292-8c1e-43b7-b4a0-46d0664f02eb-988595.png)

可以在左侧项目树中选择**图标**使用现成的组件，也可以在**设计**中设计自己需要的组件。

![20220601142340.png](./img/RCFWBwzcf828eLfV/1654148584135-a4f96179-4642-4ca4-b175-9eb59515e370-216384.png)

点击图纸空白处，在右侧修改图纸大小和背景颜色。

![20220601142550.png](./img/RCFWBwzcf828eLfV/1654148584108-dee59f1d-ac15-4b64-8f10-554b0a1454aa-215635.png)

从**折线图**文件夹中拖出**实时曲线**，右侧点击箭头处链接的图标绑定云平台数据。**来源**-我的，**产品**-云平台创建的产品，**设备**-云平台创建的设备，**属性**-选择值。

![20220601162128.png](./img/RCFWBwzcf828eLfV/1654148584199-b797c97c-e393-401e-bd5e-f7819583cc72-600177.png)

![20220601162241.png](./img/RCFWBwzcf828eLfV/1654148584161-958c018b-ea7d-4544-82b7-611692728393-171853.png)

将实时折线的长度拉长到整个图纸。

![20220601162649.png](./img/RCFWBwzcf828eLfV/1654148584540-8c52929f-0f41-4234-9098-5cf456a6aafc-771626.png)

点击右上角的**保存**，然后点击**预览**，曲线会随时间实时变化。

![20220601163043.png](./img/RCFWBwzcf828eLfV/1654148584200-637a77df-a5d5-478a-8f6c-ba575ec25abd-662371.png)

### 五、**IoT-Fast**-微信小程序/APP
软件上的数据支持在**微信小程序**或者**APP**上查看，小程序和APP的二维码在**云平台**首页的右侧，目前只支持安卓APP，ios的用户可以直接用微信小程序查看。

![1699001319294-667985a3-7dd0-4ca7-a0db-d46c5a9bb83e.png](./img/RCFWBwzcf828eLfV/1699001319294-667985a3-7dd0-4ca7-a0db-d46c5a9bb83e-809294.png)

扫码进入**IoT-Fast**小程序，输入PC端注册的账号密码。

![1654594313521-cf5abdf3-a8fd-46db-9f66-64ee1f5f31f6.png](./img/RCFWBwzcf828eLfV/1654594313521-cf5abdf3-a8fd-46db-9f66-64ee1f5f31f6-804566.png)

进入首页，可以看到产品和设备数量，点击**设备**查看该账号下的所有设备。

![1654594347250-dd0980ad-bd80-4516-b8ec-1220e30752d3.png](./img/RCFWBwzcf828eLfV/1654594347250-dd0980ad-bd80-4516-b8ec-1220e30752d3-980166.png)

![1654594421328-2e4d25f5-9060-4e5b-b591-0875f863ed4b.png](./img/RCFWBwzcf828eLfV/1654594421328-2e4d25f5-9060-4e5b-b591-0875f863ed4b-235394.png)

选择labVIEW 随机数，点击查看可以看到设备的详细信息。

![1654595504997-99cceb36-6f97-4668-9b1a-ac7d60d93dba.png](./img/RCFWBwzcf828eLfV/1654595504997-99cceb36-6f97-4668-9b1a-ac7d60d93dba-805402.png)

![1654595460411-a0353a4d-bcb2-4f8d-af8b-0ddfbe0dd979.png](./img/RCFWBwzcf828eLfV/1654595460411-a0353a4d-bcb2-4f8d-af8b-0ddfbe0dd979-989517.png)

回到首页，点击**组态**查看该账号下的所有组态，选择labVIEW 随机数，点击查看。

![1654595480693-32d8b4ea-18c2-4a6a-ae77-15c1eb48b09d.png](./img/RCFWBwzcf828eLfV/1654595480693-32d8b4ea-18c2-4a6a-ae77-15c1eb48b09d-743821.png)

效果和PC端是一样的，手机查看组态会自动横屏。

![1654595532467-f159d1cd-1b22-47bb-b254-ee7043b2a952.png](./img/RCFWBwzcf828eLfV/1654595532467-f159d1cd-1b22-47bb-b254-ee7043b2a952-261390.png)



> 更新: 2024-03-21 14:19:52  
> 原文: <https://www.yuque.com/iot-fast/ckyq/oqb687>